"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[323],{323:(v,d,i)=>{i.r(d),i.d(d,{MyProfileModule:()=>X});var l=i(9132),f=i(4466),g=i(9170),e=i(4650),p=i(3848),a=i(4006),h=i(364),_=i(2340),C=i(3574),w=i(1059),P=i(3056),y=i(6895),Z=i(4859),c=i(9549),b=i(4144),B=i(1572),F=i(2614);const I=["myProfileNgForm"];function x(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Full name is required "),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Phone address is required "),e.qZA())}function A(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid phone address "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Email address is required "),e.qZA())}function N(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid email address "),e.qZA())}function M(t,r){1&t&&(e.TgZ(0,"span",16),e._uU(1," \u1780\u17c2\u1794\u17d2\u179a\u17c2 "),e.qZA())}function O(t,r){1&t&&e._UZ(0,"mat-progress-spinner",17),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let U=(()=>{class t{constructor(o,n,s,u,m){this._serviceMyProfile=o,this._formBuilder=n,this._snackBar=s,this._router=u,this.loadingService=m,this.url=_.N.API_BASE_URL,this.FILE_PUBLIC_BASE_URL=_.N.FILE_PUBLIC_BASE_URL,this.contact=[],this.saving=!1,this.src="assets/images/avatars/profile.jpg",this.title="\u1794\u1789\u17d2\u1785\u17bc\u179b\u179a\u17bc\u1794\u1790\u178f\u17a2\u17d2\u1793\u1780",this.user={id:null,name:null,email:null,avatar:null,phone:null}}ngOnInit(){this.data=localStorage.getItem("user"),this.data&&(this.data=JSON.parse(this.data),this.data||(localStorage.clear(),this._router.navigateByUrl("/auth/login"))),this.data&&(this.src=this.FILE_PUBLIC_BASE_URL+this.data.avatar),this._buildForm()}submit(){this.form.invalid||(this.form.disable(),this.saving=!0,this._serviceMyProfile.updateProfile(this.form.value).subscribe(o=>{this.saving=!1,console.log(o.data),this.form.enable(),o.data&&(console.log(o.data),this.user.id=o.data.id,this.user.email=o.data.email,this.user.name=o.data.name,this.user.avatar=o.data.avatar,""==o.data.avatar?this.user.avatar="assets/images/avatars/default.jpg":this.data.avatar=this.FILE_PUBLIC_BASE_URL+o.data.avatar,this.user.phone=o.data.phone,localStorage.setItem("user",JSON.stringify(this.user))),this._snackBar.openSnackBar(o.message,"")},()=>{this.form.enable(),this.myProfileNgForm.resetForm(),this.saving=!1}))}srcChange(o){this.form.get("avatar").setValue(o)}_buildForm(){this.form=this._formBuilder.group({name:[this.data.name,[a.kI.required]],phone:[this.data.phone,[a.kI.required,a.kI.pattern("(^[0][0-9].{7}$)|(^[0][0-9].{8}$)|(^[855][0-9].{9}$)|(^[855][0-9].{10}$)|(.+@.+..+)")]],email:[this.data.email,[a.kI.email,a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],avatar:[this.data.avatar]})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(C.c),e.Y36(a.QS),e.Y36(w.o),e.Y36(l.F0),e.Y36(P.b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-overview"]],viewQuery:function(o,n){if(1&o&&e.Gf(I,5),2&o){let s;e.iGM(s=e.CRH())&&(n.myProfileNgForm=s.first)}},decls:28,vars:14,consts:[[1,"main-content-overview","p-3"],[1,"overview-image"],["mode","mode",3,"src","title","srcChange"],[1,"w-full","p-6"],[1,"w-full"],[1,"custom-form",3,"formGroup"],["myProfileNgForm","ngForm"],["appearance","outline",1,"w-full","mb-5"],["id","name","matInput","",3,"formControlName"],[4,"ngIf"],["id","phone","matInput","",1,"siereap",3,"formControlName"],["id","email","matInput","",1,"siereap",3,"formControlName"],[1,"flex","justify-end"],["mat-flat-button","",1,"w-full","py-6","sm:min-w-20","sm:max-w-20","min-h-11","max-h-11","rounded-md","custom-button",3,"disabled","click"],["class","text-lg",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"text-lg"],[3,"diameter","mode"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-portrait",2),e.NdJ("srcChange",function(u){return n.srcChange(u)}),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"form",5,6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"\u1788\u17d2\u1798\u17c4\u17c7"),e.qZA(),e._UZ(10,"input",8),e.YNc(11,x,2,0,"mat-error",9),e.qZA(),e.TgZ(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791"),e.qZA(),e._UZ(15,"input",10),e.YNc(16,T,2,0,"mat-error",9),e.YNc(17,A,2,0,"mat-error",9),e.qZA(),e.TgZ(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"\u17a2\u17bb\u17b8\u1798\u17c9\u17c2\u179b"),e.qZA(),e._UZ(21,"input",11),e.YNc(22,J,2,0,"mat-error",9),e.YNc(23,N,2,0,"mat-error",9),e.qZA(),e.TgZ(24,"div",12)(25,"button",13),e.NdJ("click",function(){return n.submit()}),e.YNc(26,M,2,0,"span",14),e.YNc(27,O,1,2,"mat-progress-spinner",15),e.qZA()()()()()()),2&o&&(e.xp6(2),e.Q6J("src",n.src)("title","\u1787\u17d2\u179a\u17be\u179f\u179a\u17be\u179f\u179a\u17bc\u1794\u1797\u17b6\u1796"),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("formControlName","name"),e.xp6(1),e.Q6J("ngIf",n.form.get("name").hasError("required")),e.xp6(4),e.Q6J("formControlName","phone"),e.xp6(1),e.Q6J("ngIf",n.form.get("phone").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.form.get("phone").hasError("phone")),e.xp6(4),e.Q6J("formControlName","email"),e.xp6(1),e.Q6J("ngIf",n.form.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.form.get("email").hasError("email")),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.saving),e.xp6(1),e.Q6J("ngIf",!n.form.disabled),e.xp6(1),e.Q6J("ngIf",n.form.disabled))},dependencies:[y.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,Z.lW,c.TO,c.KE,c.hX,b.Nt,B.Ou,F.w],styles:[".main-content-overview[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:300px calc(100% - 315px);gap:15px}.overview-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media (max-width: 960px){.main-content-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}.overview-image[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{margin:2em auto 0;width:60%}}"],data:{animation:h.F}}),t})();var Q=i(7392);const k=["changePasswordNgForm"];function Y(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function D(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function S(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function q(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function E(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function G(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function L(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password confirmation is required "),e.qZA())}function z(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Passwords must match "),e.qZA())}function j(t,r){1&t&&(e.TgZ(0,"span",19),e._uU(1," \u1794\u17d2\u178f\u17bc\u179a\u1796\u17b6\u1780\u17d2\u1799\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb "),e.qZA())}function K(t,r){1&t&&e._UZ(0,"mat-progress-spinner",20),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let R=(()=>{class t{constructor(o,n,s,u,m){this._serviceMyProfile=o,this._formBuilder=n,this._snackBar=s,this.loadingService=u,this._router=m,this.saving=!1}ngOnInit(){this.changePasswordForm=this._formBuilder.group({old_password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]],password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]],confirm_password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]]})}changePassword(){this.changePasswordForm.invalid||(this.changePasswordForm.disable(),this.loadingService.show(),this.saving=!0,this._serviceMyProfile.updatePassword(this.changePasswordForm.value).subscribe(o=>{this.loadingService.hide(),this.saving=!1,this.changePasswordForm.enable(),this._snackBar.openSnackBar(o.message,""),this.changePasswordNgForm.resetForm(),localStorage.clear(),this._router.navigateByUrl("/auth/login")},o=>{this.loadingService.hide(),this.saving=!1,this.changePasswordForm.enable(),this._snackBar.openSnackBar(o.error.message,"error")}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(C.c),e.Y36(a.QS),e.Y36(w.o),e.Y36(P.b),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-password"]],viewQuery:function(o,n){if(1&o&&e.Gf(k,5),2&o){let s;e.iGM(s=e.CRH())&&(n.changePasswordNgForm=s.first)}},decls:39,vars:15,consts:[[1,"w-full","p-3"],[1,"mt-3","text-3xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-5","custom-form",3,"formGroup"],["changePasswordNgForm","ngForm"],["appearance","outline",1,"w-full","mb-5"],["id","old_password","matInput","","type","password",3,"formControlName"],["passwordOldField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["id","confirm_password","matInput","","type","password",3,"formControlName"],["passwordConfirmField",""],[4,"ngIf"],[1,"flex","justify-end"],["mat-flat-button","",1,"w-full","py-6","sm:min-w-30","sm:max-w-30","min-h-11","max-h-11","rounded-md","custom-button",3,"disabled","click"],["class","text-lg",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"text-lg"],[3,"diameter","mode"]],template:function(o,n){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"\u1795\u17d2\u179b\u17b6\u179f\u17cb\u1794\u17d2\u178f\u17bc\u179a\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780"),e.qZA(),e.TgZ(3,"form",2,3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1785\u17b6\u179f\u17cb"),e.qZA(),e._UZ(8,"input",5,6),e.TgZ(10,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(9);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(11,Y,1,1,"mat-icon",8),e.YNc(12,D,1,1,"mat-icon",8),e.qZA(),e.TgZ(13,"mat-error"),e._uU(14," Password is required "),e.qZA()(),e.TgZ(15,"mat-form-field",4)(16,"mat-label"),e._uU(17,"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1790\u17d2\u1798\u17b8"),e.qZA(),e._UZ(18,"input",9,10),e.TgZ(20,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(19);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(21,S,1,1,"mat-icon",8),e.YNc(22,q,1,1,"mat-icon",8),e.qZA(),e.TgZ(23,"mat-error"),e._uU(24," Password is required "),e.qZA()(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"\u1794\u1789\u17d2\u1787\u17b6\u1780\u17cb\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1790\u17d2\u1798\u17b8"),e.qZA(),e._UZ(28,"input",11,12),e.TgZ(30,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(29);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(31,E,1,1,"mat-icon",8),e.YNc(32,G,1,1,"mat-icon",8),e.qZA(),e.YNc(33,L,2,0,"mat-error",13),e.YNc(34,z,2,0,"mat-error",13),e.qZA(),e.TgZ(35,"div",14)(36,"button",15),e.NdJ("click",function(){return n.changePassword()}),e.YNc(37,j,2,0,"span",16),e.YNc(38,K,1,2,"mat-progress-spinner",17),e.qZA()()()()}if(2&o){const s=e.MAs(9),u=e.MAs(19),m=e.MAs(29);e.xp6(3),e.Q6J("formGroup",n.changePasswordForm),e.xp6(5),e.Q6J("formControlName","old_password"),e.xp6(3),e.Q6J("ngIf","password"===s.type),e.xp6(1),e.Q6J("ngIf","text"===s.type),e.xp6(6),e.Q6J("formControlName","password"),e.xp6(3),e.Q6J("ngIf","password"===u.type),e.xp6(1),e.Q6J("ngIf","text"===u.type),e.xp6(6),e.Q6J("formControlName","confirm_password"),e.xp6(3),e.Q6J("ngIf","password"===m.type),e.xp6(1),e.Q6J("ngIf","text"===m.type),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.get("confirm_password").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.get("confirm_password").hasError("mustMatch")),e.xp6(2),e.Q6J("disabled",n.changePasswordForm.invalid||n.saving),e.xp6(1),e.Q6J("ngIf",!n.changePasswordForm.disabled),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.disabled)}},dependencies:[y.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,Z.lW,c.TO,c.KE,c.hX,c.R9,Q.Hw,b.Nt,B.Ou]}),t})();const H=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-profile"]],decls:9,vars:0,consts:[[1,"container-my-profiles-section","relative"],[1,"container-my-profiles-header"],[1,"container-my-profiles-body","absolute","inset-0","p-6"],[1,"container-my-profiles-content","border","rounded-lg","bg-white"],["label","\u1796\u17d0\u178f\u17cc\u1798\u17b6\u1793\u1791\u17bc\u1791\u17c5"],["label","\u1795\u17d2\u179b\u17b6\u179f\u17cb\u1794\u17d2\u178f\u17bc\u179a\u1796\u17b6\u1780\u17d2\u1799\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-tab-group")(5,"mat-tab",4),e._UZ(6,"app-overview"),e.qZA(),e.TgZ(7,"mat-tab",5),e._UZ(8,"app-change-password"),e.qZA()()()()())},dependencies:[p.SP,p.uX,U,R],styles:[".container-my-profiles-section[_ngcontent-%COMP%]{width:100%;height:calc(100dvh - 3.75rem);overflow:hidden}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-header[_ngcontent-%COMP%]{width:100%;background-color:#1470ad;min-height:12rem;max-height:12rem}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-body[_ngcontent-%COMP%]{width:100%;height:calc(100dvh - 3.75rem);overflow:hidden}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-body[_ngcontent-%COMP%]   .container-my-profiles-content[_ngcontent-%COMP%]{width:100%;max-height:calc(100dvh - 5.75rem);overflow:hidden}  .container-my-profiles-content .mat-tab-group .mat-tab-header .mat-tab-label-container .mat-tab-list .mat-tab-labels .mat-tab-label{width:50%}"]}),t})()}];let X=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.m,g.Y,l.Bz.forChild(H)]}),t})()},1059:(v,d,i)=>{i.d(d,{o:()=>g});var l=i(4650),f=i(7009);let g=(()=>{class e{constructor(a){this.snackbar=a}openSnackBar(a,h){this.snackbar.open(a,"","error"===h?{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:["black-snackbar"]}:{horizontalPosition:"right",verticalPosition:"bottom",duration:3e3,panelClass:["green-snackbar"]})}}return e.\u0275fac=function(a){return new(a||e)(l.LFG(f.ux))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9170:(v,d,i)=>{i.d(d,{Y:()=>l.Y});var l=i(9818)}}]);
